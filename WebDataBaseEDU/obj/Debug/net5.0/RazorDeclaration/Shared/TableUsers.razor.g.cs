// <auto-generated/>
#pragma warning disable 1591
#pragma warning disable 0414
#pragma warning disable 0649
#pragma warning disable 0169

namespace WebDataBaseEDU.Shared
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "C:\Users\User\source\repos\WebDataBaseEDU\WebDataBaseEDU\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\User\source\repos\WebDataBaseEDU\WebDataBaseEDU\_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\User\source\repos\WebDataBaseEDU\WebDataBaseEDU\_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\User\source\repos\WebDataBaseEDU\WebDataBaseEDU\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Users\User\source\repos\WebDataBaseEDU\WebDataBaseEDU\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Users\User\source\repos\WebDataBaseEDU\WebDataBaseEDU\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Users\User\source\repos\WebDataBaseEDU\WebDataBaseEDU\_Imports.razor"
using Microsoft.AspNetCore.Components.Web.Virtualization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "C:\Users\User\source\repos\WebDataBaseEDU\WebDataBaseEDU\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "C:\Users\User\source\repos\WebDataBaseEDU\WebDataBaseEDU\_Imports.razor"
using Microsoft.Data.Sqlite;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "C:\Users\User\source\repos\WebDataBaseEDU\WebDataBaseEDU\_Imports.razor"
using WebDataBaseEDU;

#line default
#line hidden
#nullable disable
#nullable restore
#line 11 "C:\Users\User\source\repos\WebDataBaseEDU\WebDataBaseEDU\_Imports.razor"
using WebDataBaseEDU.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 12 "C:\Users\User\source\repos\WebDataBaseEDU\WebDataBaseEDU\_Imports.razor"
using Blazored.Modal;

#line default
#line hidden
#nullable disable
#nullable restore
#line 13 "C:\Users\User\source\repos\WebDataBaseEDU\WebDataBaseEDU\_Imports.razor"
using Blazored.Modal.Services;

#line default
#line hidden
#nullable disable
#nullable restore
#line 1 "C:\Users\User\source\repos\WebDataBaseEDU\WebDataBaseEDU\Shared\TableUsers.razor"
using WebDataBaseEDU.Data;

#line default
#line hidden
#nullable disable
    public partial class TableUsers : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
        }
        #pragma warning restore 1998
#nullable restore
#line 32 "C:\Users\User\source\repos\WebDataBaseEDU\WebDataBaseEDU\Shared\TableUsers.razor"
       

    [Parameter] public List<User> CurrentUsers { get; set; }

    void DeleteUser(User someUser)
    {
        CurrentUsers.Remove(someUser);
        
        using (var connection = new SqliteConnection("Data Source = baza.db;"))
        {
            connection.Open();

            SqliteCommand command = new SqliteCommand();
            command.Connection = connection;

            command.CommandText = $"DELETE FROM Users WHERE _id = {someUser.Id}";

            command.ExecuteNonQuery();
        }
    }

    void EditUser(User someUser)
    {
        using (var connection = new SqliteConnection("Data Source = baza.db;"))
        {
            connection.Open();

            SqliteCommand command = new SqliteCommand();
            command.Connection = connection;

            command.CommandText = $"UPDATE Users SET Name = '{someUser.Name}', Surname = '{someUser.Surname}'," +
                                  $" Age = {someUser.Age}, Description = '{someUser.Description}'," +
                                  $" IsActive = {someUser.IsActive}, Role = '{someUser.Role}'" +
                                  $" WHERE _id = {someUser.Id}";
            
            /*command.CommandText = $"UPDATE Users SET Name = 'Maksym', Surname = 'Rakutskyi', Age = 22," +
                                  $" Description = 'male', IsActive = 1, Role = 'admin' WHERE _id = {someUser.Id}";*/

            command.ExecuteNonQuery();
        }
    }

    void ResetTable()
    {
        using (var connection = new SqliteConnection("Data Source = baza.db;"))
        {
            connection.Open();

            SqliteCommand command = new SqliteCommand();
            command.Connection = connection;

            command.CommandText = "DROP TABLE IF EXISTS Users";
            command.ExecuteNonQuery();

            command.CommandText = "CREATE TABLE IF NOT EXISTS " +
                                  "Users (_id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT UNIQUE, Name STRING NOT NULL, " +
                                  "Surname STRING NOT NULL, Age INTEGER NOT NULL, Description STRING NOT NULL, " +
                                  "IsActive BOOL NOT NULL, Role STRING NOT NULL)";
            command.ExecuteNonQuery();

            command.CommandText = "INSERT INTO Users (Name, Surname, Age, Description, IsActive, Role) VALUES " +
                                  "('Massimo', 'Bevan', 23, 'male', 1, 'admin'), " +
                                  "('Gaia', 'Rasmussen', 20, 'female', 0, 'user'), " +
                                  "('Abraham', 'Tanner', 12, 'male', 1, 'user'), " +
                                  "('Tara', 'Page', 89, 'female', 0, 'user'), " +
                                  "('Calvin', 'Morse', 38, 'male', 0, 'user'), " +
                                  "('Lillia', 'Carlson', 73, 'female', 0, 'user'), " +
                                  "('Meredith', 'Peters', 18, 'female', 1, 'admin'), " +
                                  "('Elwood', 'Sullivan', 13, 'male', 0, 'user'), " +
                                  "('Alicja', 'Meyer', 45, 'female', 1, 'admin'), " +
                                  "('Kira', 'Phillips', 29, 'female', 1, 'user')";
            command.ExecuteNonQuery();
            
        }
        
        
    }


#line default
#line hidden
#nullable disable
    }
}
#pragma warning restore 1591
