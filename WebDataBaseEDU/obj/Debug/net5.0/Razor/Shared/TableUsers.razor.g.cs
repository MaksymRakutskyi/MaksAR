#pragma checksum "C:\Users\User\source\repos\WebDataBaseEDU\WebDataBaseEDU\Shared\TableUsers.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "cb06143483d193e50c46da48c43a51bb8f98c2ab"
// <auto-generated/>
#pragma warning disable 1591
namespace WebDataBaseEDU.Shared
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "C:\Users\User\source\repos\WebDataBaseEDU\WebDataBaseEDU\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\User\source\repos\WebDataBaseEDU\WebDataBaseEDU\_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\User\source\repos\WebDataBaseEDU\WebDataBaseEDU\_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\User\source\repos\WebDataBaseEDU\WebDataBaseEDU\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Users\User\source\repos\WebDataBaseEDU\WebDataBaseEDU\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Users\User\source\repos\WebDataBaseEDU\WebDataBaseEDU\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Users\User\source\repos\WebDataBaseEDU\WebDataBaseEDU\_Imports.razor"
using Microsoft.AspNetCore.Components.Web.Virtualization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "C:\Users\User\source\repos\WebDataBaseEDU\WebDataBaseEDU\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "C:\Users\User\source\repos\WebDataBaseEDU\WebDataBaseEDU\_Imports.razor"
using Microsoft.Data.Sqlite;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "C:\Users\User\source\repos\WebDataBaseEDU\WebDataBaseEDU\_Imports.razor"
using WebDataBaseEDU;

#line default
#line hidden
#nullable disable
#nullable restore
#line 11 "C:\Users\User\source\repos\WebDataBaseEDU\WebDataBaseEDU\_Imports.razor"
using WebDataBaseEDU.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 12 "C:\Users\User\source\repos\WebDataBaseEDU\WebDataBaseEDU\_Imports.razor"
using Blazored.Modal;

#line default
#line hidden
#nullable disable
#nullable restore
#line 13 "C:\Users\User\source\repos\WebDataBaseEDU\WebDataBaseEDU\_Imports.razor"
using Blazored.Modal.Services;

#line default
#line hidden
#nullable disable
#nullable restore
#line 1 "C:\Users\User\source\repos\WebDataBaseEDU\WebDataBaseEDU\Shared\TableUsers.razor"
using WebDataBaseEDU.Data;

#line default
#line hidden
#nullable disable
    public partial class TableUsers : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
            __builder.OpenElement(0, "div");
            __builder.AddMarkupContent(1, "<h1>Table Users</h1>\r\n    ");
            __builder.OpenElement(2, "button");
            __builder.AddAttribute(3, "class", "btn-secondary col-1");
            __builder.AddAttribute(4, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 5 "C:\Users\User\source\repos\WebDataBaseEDU\WebDataBaseEDU\Shared\TableUsers.razor"
                                                  ResetTable

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(5, "style", "margin-bottom: 1.1em");
            __builder.AddContent(6, "RESET");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(7, "\r\n");
            __builder.OpenElement(8, "table");
            __builder.AddAttribute(9, "class", "table");
            __builder.AddMarkupContent(10, "<thead><tr><th>id</th>\r\n        <th>Name</th>\r\n        <th>Surname</th>\r\n        <th>Age</th>\r\n        <th>Descriprion</th>\r\n        <th>IsActive</th>\r\n        <th>Role</th>\r\n        <th></th></tr></thead>\r\n    ");
            __builder.OpenElement(11, "tbody");
#nullable restore
#line 21 "C:\Users\User\source\repos\WebDataBaseEDU\WebDataBaseEDU\Shared\TableUsers.razor"
     foreach (User item in CurrentUsers)
    {

#line default
#line hidden
#nullable disable
            __builder.OpenComponent<WebDataBaseEDU.Shared.RowUser>(12);
            __builder.AddAttribute(13, "CurrentUser", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<WebDataBaseEDU.Data.User>(
#nullable restore
#line 23 "C:\Users\User\source\repos\WebDataBaseEDU\WebDataBaseEDU\Shared\TableUsers.razor"
                               item

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(14, "OnClickDeleteUser", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.Components.EventCallback<WebDataBaseEDU.Data.User>>(Microsoft.AspNetCore.Components.EventCallback.Factory.Create<WebDataBaseEDU.Data.User>(this, 
#nullable restore
#line 23 "C:\Users\User\source\repos\WebDataBaseEDU\WebDataBaseEDU\Shared\TableUsers.razor"
                                                        DeleteUser

#line default
#line hidden
#nullable disable
            )));
            __builder.AddAttribute(15, "OnClickEditUser", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.Components.EventCallback<WebDataBaseEDU.Data.User>>(Microsoft.AspNetCore.Components.EventCallback.Factory.Create<WebDataBaseEDU.Data.User>(this, 
#nullable restore
#line 23 "C:\Users\User\source\repos\WebDataBaseEDU\WebDataBaseEDU\Shared\TableUsers.razor"
                                                                                     EditUser

#line default
#line hidden
#nullable disable
            )));
            __builder.CloseComponent();
#nullable restore
#line 24 "C:\Users\User\source\repos\WebDataBaseEDU\WebDataBaseEDU\Shared\TableUsers.razor"
    }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(16, "\r\n\r\n");
            __builder.OpenElement(17, "button");
            __builder.AddAttribute(18, "class", "btn-info btn-lg");
            __builder.AddAttribute(19, "style", "margin-bottom: 2.2em");
            __builder.AddMarkupContent(20, "\r\n    Add User â„–");
            __builder.AddContent(21, 
#nullable restore
#line 29 "C:\Users\User\source\repos\WebDataBaseEDU\WebDataBaseEDU\Shared\TableUsers.razor"
                CurrentUsers.Count + 1

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
        }
        #pragma warning restore 1998
#nullable restore
#line 32 "C:\Users\User\source\repos\WebDataBaseEDU\WebDataBaseEDU\Shared\TableUsers.razor"
       

    [Parameter] public List<User> CurrentUsers { get; set; }

    void DeleteUser(User someUser)
    {
        CurrentUsers.Remove(someUser);
        
        using (var connection = new SqliteConnection("Data Source = baza.db;"))
        {
            connection.Open();

            SqliteCommand command = new SqliteCommand();
            command.Connection = connection;

            command.CommandText = $"DELETE FROM Users WHERE _id = {someUser.Id}";

            command.ExecuteNonQuery();
        }
    }

    void EditUser(User someUser)
    {
        using (var connection = new SqliteConnection("Data Source = baza.db;"))
        {
            connection.Open();

            SqliteCommand command = new SqliteCommand();
            command.Connection = connection;

            command.CommandText = $"UPDATE Users SET Name = '{someUser.Name}', Surname = '{someUser.Surname}'," +
                                  $" Age = {someUser.Age}, Description = '{someUser.Description}'," +
                                  $" IsActive = {someUser.IsActive}, Role = '{someUser.Role}'" +
                                  $" WHERE _id = {someUser.Id}";
            
            /*command.CommandText = $"UPDATE Users SET Name = 'Maksym', Surname = 'Rakutskyi', Age = 22," +
                                  $" Description = 'male', IsActive = 1, Role = 'admin' WHERE _id = {someUser.Id}";*/

            command.ExecuteNonQuery();
        }
    }

    void ResetTable()
    {
        using (var connection = new SqliteConnection("Data Source = baza.db;"))
        {
            connection.Open();

            SqliteCommand command = new SqliteCommand();
            command.Connection = connection;

            command.CommandText = "DROP TABLE IF EXISTS Users";
            command.ExecuteNonQuery();

            command.CommandText = "CREATE TABLE IF NOT EXISTS " +
                                  "Users (_id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT UNIQUE, Name STRING NOT NULL, " +
                                  "Surname STRING NOT NULL, Age INTEGER NOT NULL, Description STRING NOT NULL, " +
                                  "IsActive BOOL NOT NULL, Role STRING NOT NULL)";
            command.ExecuteNonQuery();

            command.CommandText = "INSERT INTO Users (Name, Surname, Age, Description, IsActive, Role) VALUES " +
                                  "('Massimo', 'Bevan', 23, 'male', 1, 'admin'), " +
                                  "('Gaia', 'Rasmussen', 20, 'female', 0, 'user'), " +
                                  "('Abraham', 'Tanner', 12, 'male', 1, 'user'), " +
                                  "('Tara', 'Page', 89, 'female', 0, 'user'), " +
                                  "('Calvin', 'Morse', 38, 'male', 0, 'user'), " +
                                  "('Lillia', 'Carlson', 73, 'female', 0, 'user'), " +
                                  "('Meredith', 'Peters', 18, 'female', 1, 'admin'), " +
                                  "('Elwood', 'Sullivan', 13, 'male', 0, 'user'), " +
                                  "('Alicja', 'Meyer', 45, 'female', 1, 'admin'), " +
                                  "('Kira', 'Phillips', 29, 'female', 1, 'user')";
            command.ExecuteNonQuery();
            
        }
        
        
    }


#line default
#line hidden
#nullable disable
    }
}
#pragma warning restore 1591
